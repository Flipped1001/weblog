"use strict";(self.webpackChunkvuepress_theme_hope_template=self.webpackChunkvuepress_theme_hope_template||[]).push([[7388],{2789:(t,e)=>{e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[t,l]of e)n[t]=l;return n}},5448:(t,e,n)=>{n.r(e),n.d(e,{comp:()=>a,data:()=>s});var l=n(7829);const r=(0,l.Fv)('<h1 id="https如何优化" tabindex="-1"><a class="header-anchor" href="#https如何优化"><span>HTTPS如何优化？</span></a></h1><h2 id="_1-分析性能损耗" tabindex="-1"><a class="header-anchor" href="#_1-分析性能损耗"><span>1.分析性能损耗</span></a></h2><ul><li><p>第一个环节， TLS 协议握手过程；</p></li><li><p>第二个环节，握手后的对称加密报文传输。</p><p>第一个环节的性能损耗更大一些</p></li></ul><h3 id="硬件优化" tabindex="-1"><a class="header-anchor" href="#硬件优化"><span>硬件优化</span></a></h3><p>HTTPS协议是<strong>计算密集型</strong>，而不是<strong>I/O密集型</strong>，应该买CUP，应该选择可以<strong>支持 AES-NI 特性的 CPU</strong></p><h3 id="软件优化" tabindex="-1"><a class="header-anchor" href="#软件优化"><span>软件优化</span></a></h3><p>软件的优化方向可以分成两种：<strong>软件升级，协议优化</strong></p><ul><li>软件升级存在一定风险</li><li>主攻协议优化： <ol><li><strong>密钥算法优化</strong>：密钥交换算法尽量不要选择RSA密钥交换算法，而是选择ECDHE密钥交换算法，椭圆 <strong>x25519 曲线</strong>——不仅可以减少时间，还可以拥有前向安全性</li><li><strong>TLS升级</strong>：<strong>TLS 1.3 把 Hello 和公钥交换这两个消息合并成了一个消息，于是这样就减少到只需 1 RTT 就能完成 TLS 握手</strong>。只支持ECDHE算法</li></ol></li></ul><h3 id="证书优化" tabindex="-1"><a class="header-anchor" href="#证书优化"><span>证书优化</span></a></h3><p>对于证书的优化，可以有两个方向：</p><ul><li><p>一个是<strong>证书传输</strong>，</p></li><li><p>一个是<strong>证书验证</strong>；</p><ol><li>证书传输优化</li></ol><p>要让证书更便于传输，那必然是减少证书的大小，这样可以节约带宽，也能减少客户端的运算量。所以，<strong>对于服务器的证书应该选择椭圆曲线（ECDSA）证书，而不是 RSA 证书，因为在相同安全强度下， ECC 密钥长度比 RSA 短的多</strong>。</p><p>2.证书传输优化</p><p>OCSP ，名为在线证书状态协议（<em>Online Certificate Status Protocol</em>）来查询证书的有效性，它的工作方式是<strong>向 CA 发送查询请求，让 CA 返回证书的有效状态</strong>。</p></li></ul><h3 id="会话复用" tabindex="-1"><a class="header-anchor" href="#会话复用"><span>会话复用</span></a></h3><ul><li><p>第一种叫 Session ID；</p></li><li><p>第二种叫 Session Ticket；</p><p>都不具备前向安全性</p><ol><li><p>Session ID：<strong>客户端和服务器首次 TLS 握手连接后，双方会在内存缓存会话密钥，并用唯一的 Session ID 来标识</strong> 弊端：<strong>客户端再次e连接不一定会命中上次访问过的服务器</strong>，客户端增多，占用服务器的内存太多</p></li><li><p>Session Ticket:服务端不在储存会话密钥，而是把缓存交给客户端</p><p>TLS1.3:客户端会把 Ticket 和 HTTP 请求一同发送给服务端，这种方式叫 <strong>Pre-shared Key</strong>。</p></li></ol></li></ul><h2 id="https中tcp三次握手和tls握手能同时进行吗" tabindex="-1"><a class="header-anchor" href="#https中tcp三次握手和tls握手能同时进行吗"><span><strong>HTTPS中TCP三次握手和TLS握手能同时进行吗？</strong></span></a></h2><p>如果客户端和服务端同时支持 TCP Fast Open 功能，那么在完成首次通信过程后，后续客户端与服务端 的通信则可以绕过三次握手发送数据，这就减少了握手带来的 1 个 RTT 的时间消耗。</p><p>在特定的， TCP Fast Open + TLSv1.3同时开启的情况下，并且是第二次进行通信，这样才可以跳过三次握手，直接进行TLS握手</p>',16),p={},a=(0,n(2789).A)(p,[["render",function(t,e){return(0,l.uX)(),(0,l.CE)("div",null,[(0,l.Q3)(" more "),r])}]]),s=JSON.parse('{"path":"/demo/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/HTTPS.html","title":"HTTPS如何优化","lang":"zh-CN","frontmatter":{"title":"HTTPS如何优化","date":"2023-11-23T00:00:00.000Z","tags":["计算机基础","计算机网络","HTTPS"],"categories":["计算机网络"],"head":[["meta",{"property":"og:url","content":"https://flipped1001.cn/demo/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/HTTP/HTTPS.html"}],["meta",{"property":"og:site_name","content":"博客主页"}],["meta",{"property":"og:title","content":"HTTPS如何优化"}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-07-16T10:13:48.000Z"}],["meta",{"property":"article:author","content":"Flipped"}],["meta",{"property":"article:tag","content":"计算机基础"}],["meta",{"property":"article:tag","content":"计算机网络"}],["meta",{"property":"article:tag","content":"HTTPS"}],["meta",{"property":"article:published_time","content":"2023-11-23T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-07-16T10:13:48.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"HTTPS如何优化\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2023-11-23T00:00:00.000Z\\",\\"dateModified\\":\\"2024-07-16T10:13:48.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Flipped\\"}]}"]]},"headers":[{"level":2,"title":"1.分析性能损耗","slug":"_1-分析性能损耗","link":"#_1-分析性能损耗","children":[{"level":3,"title":"硬件优化","slug":"硬件优化","link":"#硬件优化","children":[]},{"level":3,"title":"软件优化","slug":"软件优化","link":"#软件优化","children":[]},{"level":3,"title":"证书优化","slug":"证书优化","link":"#证书优化","children":[]},{"level":3,"title":"会话复用","slug":"会话复用","link":"#会话复用","children":[]}]},{"level":2,"title":"HTTPS中TCP三次握手和TLS握手能同时进行吗？","slug":"https中tcp三次握手和tls握手能同时进行吗","link":"#https中tcp三次握手和tls握手能同时进行吗","children":[]}],"git":{"createdTime":1721124828000,"updatedTime":1721124828000,"contributors":[{"name":"flipped1001","email":"3154147351@qq.com","commits":1}]},"readingTime":{"minutes":2.49,"words":746},"filePathRelative":"demo/计算机网络/HTTP/HTTPS.md","localizedDate":"2023年11月23日","excerpt":""}')}}]);